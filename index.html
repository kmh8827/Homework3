<!DOCTYPE html>
<html>
    <head>

        <title>Random Password Generator</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

        <script type="text/javascript">

        var letterP = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
        var numberP = [1,2,3,4,5,6,7,8,9];
        var specC = ["!","@","#","$","%","^","&","*","(",")"];
        var chosenUse = "";
      
    //  Determines which arrays to include in creation of the password
        function randomAssign(useThis) {
            var position = Math.floor(Math.random() * useThis.length);
            return useThis[position];
        };


    //  Function that generates the users random password
        function GenerateP() {

            var whatUse = [];
            var randomPass = [];
            var newPass = "";
    //  Series of propmts to ask what users want to use in password creation
    //
            do {
            var includeL = prompt("Would you like to include lower-case letters y for yes");

            if (includeL === "y")

            {
                whatUse.push("Lower");
            }

            var includeU = prompt("Would you like to include upper-case letters y for yes");

            if (includeU === "y")
            {
                whatUse.push("Upper");
            }

            var includeN = prompt("Would you like to include numbers y for yes");

            if (includeN === "y")
            {
                whatUse.push("Number");
            }

            var includeS = prompt("Would you like to include special characters y for yes");

            if (includeS === "y")
            {
                whatUse.push("Special");
            }
    //
            alert("You have chose to use " + JSON.stringify(whatUse));
            if (whatUse.length < 1) {
                alert("You need to select at least one type of unit for your password!!!");
            }
        }
        while (whatUse.length < 1);
    //  Checks to ensure the password length is appropriate
            var pLength = parseInt(prompt("How long do you want your password to be? (must be at least 8 but no more than 128)"));
            parseInt(pLength);
            while (pLength <= 8 || pLength >= 128) {
                pLength = prompt("this is not an acceptable password length, please try again. (must be at least 8 but no more than 128)");
                parseInt(pLength);
            }
    //
    //Generates Password
            for (var i = 0;i < pLength; i++) {
                var type = Math.floor(Math.random() * whatUse.length);
                console.log(whatUse.length);

                if (whatUse[type] === "Lower") {
                    var randomCharacter = randomAssign(letterP);
                    randomPass.push(randomCharacter);
                    console.log(randomCharacter);
                }
                else if (whatUse[type] === "Upper") {
                    var randomCharacter = randomAssign(letterP);
                    randomCharacter = randomCharacter.toUpperCase();
                    randomPass.push(randomCharacter);
                    console.log(randomCharacter);
                }
                else if (whatUse[type] === "Number") {
                    var randomCharacter = randomAssign(numberP);
                    randomPass.push(randomCharacter);
                    console.log(randomCharacter);
                }
                else if (whatUse[type] === "Special") {
                    var randomCharacter = randomAssign(specC);
                    randomPass.push(randomCharacter);
                    console.log(randomCharacter);
                }          
            }

            for (var i = 0; i < randomPass.length; i++) {
                newPass = newPass + randomPass[i];
            }

            alert("Your new password is " + newPass);
          
        };
    //
        </script>
    </head>
    <body>
        <h1 style="text-align: center;">Password Generator</h1>
        <main class="container">
            <section class="row">
                <div class="col-6">
                    <div class="mb-3">
                        <label for="exampleFormControlTextarea1" class="form-label" style="color:olive; font-size: 24px;"><b>Generate a Password</b></label>
                        <hr />
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" style="text-align: center;">Your new password</textarea>
                        <hr />
                    </div>
                </div>
            </section>
            <section class="row">
                <div class="col-6">
                    <div class="d-grid gap-2 mt-3 col-6 mx-auto">
                        <button onclick="GenerateP()" class="btn btn-primary" type="button">Generate</button>
                    </div>
                </div>
            </section>
         
        </main>
    </body>
</html>